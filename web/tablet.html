<!DOCTYPE html>
  <head>
    <title>OBS CR control (small)</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- boostrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- Core code -->
    <script src="https://cdn.jsdelivr.net/npm/obs-websocket-js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script src="util.js"></script>
    <script src="control.js"></script>
    <script type="module">
    </script>
    <!-- https://www.geeksforgeeks.org/how-to-make-a-qr-code-generator-using-qrcode-js/ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" integrity="sha512-CNgIRecGo7nphbeZ04Sc13ka07paqdeTu0WR1IM4kNcpmBAUSHSQX0FslNhTDadL4O5SAGapGt4FodqL8My0mA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  </head>
  <body>

    <div class="ssl-warning" style="display:none; color: maroon">
        You are currently using HTTPS.  Unfortunately OBS probably isn't
        using SSL and browsers only allow SSL websocket connections from
        SSL pages, so you need to turn SSL off.  Please try changing the
        URL to 'http' instead of 'https' which might require telling
        your browser to not force SSL for this page (try clicking lock or
	      shield icons by the URL bar).
    </div>

    <div class="audio-warning" style="display:none; color: maroon">
        Audio playback has failed.  Do you need to allow it on this page?
        Or try clicking the "enable audio" button.
    </div>

    <div class="enable-audio" style="color: maroon">
        <button class="enable-audio-button">Enable audio</button>
        Click this button once to play some sound, to enable audio in this browser.
        Browsers won't play sound unless you interact first, to avoid sites spamming
        sound without your request.
    </div>

    <!--<div class="status">Status is updated here</div>-->
    <!--<span class="synced" syncwith="scene">Scene</span>-->
    <!--<span class="synced" syncwith="ss_resolution">Resolution</span>-->

    <div style="display: grid; grid-template-columns: 9fr 1fr"> <!-- main (contains panel/sidebar) -->
      <div style="display: grid; grid-template-rows: .5fr 4.5fr"> <!-- main panel -->
        <div style="display: grid; grid-template-columns: repeat(9, 1fr)"> <!-- top indicators -->
          <div class="live" style="display: flex; justify-content: center;" title="When red, (audio, camera gallery, or screenshare) may be being broadcasted">Live</div>
          <button class="indicator" id="warning">Warn</button>
          <button class="indicator" id="caution">Caution</button>
          <button class="indicator" id="time">Time</button>
          <button class="indicator" id="notes">Notes</button>
          <button class="indicator" id="question">Question</button>
          <button class="indicator" id="chat">Chat</button>
          <button class="indicator" id="slower">Slower</button>
          <button class="indicator" id="faster">Faster</button>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 2fr 2fr"> <!-- under indicators-->
          <div>
            <span class="time" title="Current time"></span>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr">
            <button class="preset-go"           id="preset-a">A</button>
            <button class="preset-go"           id="preset-d">D</button>
            <button class="preset-go"           id="preset-b">B</button>
            <button class="preset-go"           id="preset-e">E</button>
            <button class="preset-go"           id="preset-c">C</button>
            <button class="preset-go"           id="preset-f">F</button>
  
          </div>
          <div style="display: grid">
            <button class="quick-break" title="Cut audio/gallery and swich scene to Notes.">Break</button>
            <button class="quick-back" title="Do the jump back from the break.  The following fields control how you go back.  There is a three second countdown to return.">Back</button>
            <select class="quick-back-scene synced" syncwith="quickback-quickback-a-value" title="Which scene to return to."></select></td>
            <input class="quick-back-audio-brcd synced" type="checkbox" syncwith="checkbutton-quick_brcd-value" title="If true, un-mute the broadcaster also.">Brcd Audio?</input>
            <input class="quick-back-jingle synced" type="checkbox" syncwith="checkbutton-quick_jingle-value" title="If true, play a short jingle when returning.">Jingle?</input>

          </div>
        </div>
      </div>
      <div style="display: flex"> <!-- right slider -->
        <input class="gallerysize" style="writing-mode: vertical-rl; direction: rtl; height: 100%; justify-content: center" type="range" min="0" max="1" step="0.01" title="Gallery size slider.  If zero, the gallery is not visible.">
        <span style="writing-mode: vertical-lr; direction: ltr; text-align: center">Gallery size</span>
      </div>
    </div>

    <table border="1">
      <tr><th title="Synced indicators.  Used for non-verbal instructor communication.">Indicators:</th>
        <td class="live" title="When red, (audio, camera gallery, or screenshare) may be being broadcasted">Live</td>
          <td><button class="indicator" id="warning">Warn</button></td>
          <td><button class="indicator" id="caution">Caution</button></td>
          <td><button class="indicator" id="time">Time</button></td>
          <td><button class="indicator" id="notes">Notes</button></td>
          <td><button class="indicator" id="question">Question</button></td>
          <td><button class="indicator" id="chat">Chat</button></td>
          <td><button class="indicator" id="slower">Slower</button></td>
          <td><button class="indicator" id="faster">Faster</button></td>
        </tr>
    </table>
    <table border="">
      <tr>
          <td><span class="synced" syncwith="scene">Scene</span></td>
          <td><span class="time" title="Current time"></span></td>
          <td class="playfile timer" title="Timer for ongoing playback">-</td>
          <td class="status">Status</td>
        </tr>
  </table>

    <table border="1">
      <tr>
          <td><button class="preset-go"           id="preset-a">A</button></td>
          <td><button class="preset-go"           id="preset-d">D</button></td>
      </tr>
      <tr>
          <td><button class="preset-go"           id="preset-b">B</button></td>
          <td><button class="preset-go"           id="preset-e">E</button></td>
      </tr>
      <tr>
          <td><button class="preset-go"           id="preset-c">C</button></td>
          <td><button class="preset-go"           id="preset-f">F</button></td>
      </tr>
  </table>

    <table border="1">
        <tr>
            <th title="Quick actions to take you to or from a break.">Quick actions:</th>
            <td><button class="quick-break" title="Cut audio/gallery and swich scene to Notes.">Break</button></td>
            <th title="These scroll the notes on the broadcaster computer up and down.  The broadcaster has to enable this, and sometimes it doesn't work and the notes window needs to be clicked.">Notes scroll:</th>
            <td><button class="scrollnotes up"  >Up  </button></td>
            <td><button class="scrollnotes down">Down</button></td>
            <td><button class="scrollnotes pgup">PgUp</button></td>
            <td><button class="scrollnotes pgdn">PgDn</button></td>
            <td><button class="scrollnotes end" >End </button></td>
        </tr>
    </table>




    <a class="preview-href" href="">Preview</a>,
    <a class="director-href" href="">Director view</a>,
    <a class="annunciators-href" href="">Annunciator panel only</a>,
    <button class="popout" title="Pop out this window without tabs/menus" onclick="window.open(window.location.href, 'popupWindow', 'width=700,height=300,menubar=no,toolbar=no,location=no,status=no');">Pop out window</button>

    <button onClick='qrdiv = document.querySelector("#url-qr-code img") ; if (qrdiv) {qrdiv.remove()} else { new QRCode("url-qr-code", window.location.href)}'>Show QR code</button>
    <div style="margin: 1em" id="url-qr-code"></div>
    <script>
        init_all()
    </script>

  <body>
  </html>
