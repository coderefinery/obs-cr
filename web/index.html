<!DOCTYPE html>
  <head>
    <title>OBS CR control</title>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/obs-websocket-js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script src="util.js"></script>
    <script src="control.js"></script>
    <!-- https://www.geeksforgeeks.org/how-to-make-a-qr-code-generator-using-qrcode-js/ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" integrity="sha512-CNgIRecGo7nphbeZ04Sc13ka07paqdeTu0WR1IM4kNcpmBAUSHSQX0FslNhTDadL4O5SAGapGt4FodqL8My0mA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="module">
    </script>
  </head>
  <body>

    <div class="status"></div>

    <div class="ssl-warning" style="display:none; color: maroon">
        You are currently using HTTPS.  Unfortunately if the OBS
        websocket isn't using SSL, then a SSL webpage can't connect to
        it.  (From SSL webpages, browsers only allow SSL websocket
        connections).  Thus, you need to turn SSL off.  Please try changing the
        URL to 'http' instead of 'https' which might require telling
        your browser to not force SSL for this page (try clicking lock or
	shield icons by the URL bar).  This message will disappear if
        you successfully connect to a wss:// (websocket+SSL) URL.
    </div>

    <ul>
      <li>For instructiors ("pop out" gives you small browser window).  Recommended: one of the first two options.
        <ul>
          <li><a class="annunciators-href" href="">Annunciator panel lights only</a>. (Live/Warn/Time/Notes/Question/etc.)
            <button class="popout annunciators-href" onclick="window.open(event.target.href, 'popupWindow', 'width=800,height=600,menubar=no,toolbar=no,location=no,status=no');">Pop out</button>
          </li>
          <li><a class="tablet-instructors-href" href="">Phone/tablet view for instructors</a>.
            <button class="popout tablet-instructors-href" onclick="window.open(event.target.href, 'popupWindow', 'width=800,height=600,menubar=no,toolbar=no,location=no,status=no');">Pop out</button>
            <button onClick='qrdiv = document.querySelector("#url-qr-code img") ; if (qrdiv) {qrdiv.remove()} else { new QRCode("url-qr-code", replace_url_path(window.location.href, "tablet-instructors"))}'>Show QR code for phone/tablet view.</button>
          </li>
          <li><a class="preview-href" href="">Real-time scene preview</a>.
            <button class="popout preview-href" onclick="window.open(event.target.href, 'popupWindow', 'width=800,height=600,menubar=no,toolbar=no,location=no,status=no');">Pop out</button>
          </li>
        </ul>
      </li>
      <li>For directors/broadcasters/etc.
        <ul>
          <li><a class="director-href" href="">Big control panel</a>.
            <button class="popout director-href" onclick="window.open(event.target.href, 'popupWindow', 'width=800,height=600,menubar=no,toolbar=no,location=no,status=no');">Pop out</button>
          </li>
          <li><a class="tablet-href" href="">Phone/tablet view</a>.
            <button class="popout tablet-href" onclick="window.open(event.target.href, 'popupWindow', 'width=800,height=600,menubar=no,toolbar=no,location=no,status=no');">Pop out</button>
            <button onClick='qrdiv = document.querySelector("#url-qr-code img") ; if (qrdiv) {qrdiv.remove()} else { new QRCode("url-qr-code", replace_url_path(window.location.href, "tablet"))}'>Show QR code for phone/tablet view.</button>
          </li>
          <li><a class="small-href" href="">Small panel for instructors</a> (who want more control)
            <button class="popout small-href" onclick="window.open(event.target.href, 'popupWindow', 'width=800,height=600,menubar=no,toolbar=no,location=no,status=no');">Pop out</button>
          </li>
      </ul>
      </li>
    </ul>
    <div style="margin: 1em" id="url-qr-code"></div>

    <p>Arguments are given via URL fragments (not query arguments): <code>#url=wss://localhost:4455&password=XXXXX</code></p>

    <div style="margin: 1em" id="url-qr-code"></div>

    <script>
        init_rellinks()
    </script>

  <body>
  </html>
